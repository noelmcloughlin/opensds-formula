### opensds/sushi/defaults.yaml
# vim: sts=2 ts=2 sw=2 et ai

opensds:
  sushi:
    plugin:
      ids:
        - csi
        - flexvolume
        - provisioner
        - service-broker
        - cindercompatibleapi
      custom:
        flexvolume:
          dir: /usr/libexec/kubernetes/kubelet-plugins/volume/exec/opensds.io~opensds
          file: bin/flexvolume.server.opensds
        provisioner:
          - deploy/configmap.yaml
          - deploy/pod-provisioner.yaml
        csi:
          - server/deploy/kubernetes/csi-attacher-opensdsplugin.yaml     
          - server/deploy/kubernetes/csi-nodeplugin-opensdsplugin.yaml   
          - server/deploy/kubernetes/csi-provisioner-rbac.yaml
          - server/deploy/kubernetes/csi-attacher-rbac.yaml
          - server/deploy/kubernetes/csi-nodeplugin-rbac.yaml
          - server/deploy/kubernetes/csi-snapshotter-opensdsplugin.yaml
          - server/deploy/kubernetes/csi-configmap-opensdsplugin.yaml
          - server/deploy/kubernetes/csi-provisioner-opensdsplugin.yaml  
          - server/deploy/kubernetes/csi-snapshotter-rbac.yaml
      subdirs:
        - deploy
        - charts
        - examples
        - server/deploy
        - server/examples
      daemon:
        csi:
          strategy: config-systemd
          start: /usr/local/bin/kubectl create -f deploy/kubernetes
          stop: /usr/local/bin/kubectl delete -f deploy/kubernetes
        provisioner:
          strategy: config-systemd
          start: /usr/local/bin/kubectl create -f deploy/
          stop: /usr/local/bin/kubectl delete -f deploy/
